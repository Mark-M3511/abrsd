{#
/**
 * @file
 * Theme CTA button component.
 *
 * Available variables:
 * - url: URL of the link.
 * - target: Target of the link.
 * - text: Text of the link.
 * - extra_classes: Extra classes to add to the button.
 * - classes: Classes to add to the button.
 *
 * @see Various calling templates
 */
#}

{% if url is not empty %}

   {# Process URL to convert drupal tokens to a valid URL #}
    {% if url starts with 'entity:node' %}
       {% set nid = url|split('/')[1] %}
       {% set url = path('entity.node.canonical', {'node': nid} ) %}
    {% elseif url starts with 'internal:/' %}
        {% set url = '/' ~ url|split(':/')[1] %}
    {% endif %}

    {% set text = text|upper %}
	{% if classes is defined %}
		{% set classes = classes ~ (extra_classes ? extra_classes : '') %}
		<a href="{{ url }}" class="{{ classes }}" target="{{ target }}">
			{{ text }}
		</a>
	{% else %}
		<a href="{{ url }}" class="btn btn-primary {{ extra_classes }}" target="{{ target }}">
			{{ text }}
		</a>
	{% endif %}
{% endif %}
