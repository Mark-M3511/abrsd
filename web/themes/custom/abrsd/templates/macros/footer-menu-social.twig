{# Set custom classes #}
{% set classes = [
  'd-flex',
  'flex-column',
] %}

{# Set custom attributes #}
{% set attributes = attributes.addClass(classes) %}

{#
  We call a macro which calls itself to render the full tree.
  @see http://twig.sensiolabs.org/doc/tags/macro.html
#}
{{ menus.menu_links(items, attributes, 0) }}

{% macro menu_links(items, attributes, menu_level) %}
	{% import _self as menus %}
  {# Import macro #}
  {% import '@abrsd/macros/social-badge.twig' as social %}
	{% if items %}
		{% if menu_level == 0 %}
			<ul{{attributes.addClass('nav')|without('id')}}>
			{% else %}
				<ul class="menu">
				{% endif %}
				{% for item in items %}
					{%
        set classes = [
          'nav-item',
          item.is_expanded ? 'menu-item--expanded',
          item.is_collapsed ? 'menu-item--collapsed',
          item.in_active_trail ? 'menu-item--active-trail',
          'd-flex',
          'justify-content-center',
          'rounded-circle',
        ]
      %}
					{# Select icons based on current item title #}
					{% set item_title = item.title|lower|trim %}
          {# Call a macro to render the social platform's badge #}
          {{social.social_badge('li', item_title, item.url, classes)}}
				{% endfor %}
			</ul>
		{% endif %}
	{% endmacro %}
